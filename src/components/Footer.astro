---
import { site_author_email, site_title, social } from "../consts";

const today = new Date();

interface SocialLink {
	name: string;
	url: string;
}

function encodeEmail(text: string): string {
	return Array.from(text)
		.map((char) => "%" + char.charCodeAt(0).toString(16))
		.join("");
}
---

<footer class="footer">
	<div class="footer__gradient"></div>
	<div class="noise"></div>
	<div class="footer__container">
		<div class="footer__content">
			<div class="footer__copyright">
				<p>
					&copy;2019 &ndash; {today.getFullYear()}
					{site_title}<br />
					Todos os direitos reservados.
				</p>
			</div>
			<div class="footer__spacer"></div>
			<ul class="footer__social">
				<li>
					<a href={`mailto:${encodeEmail(site_author_email)}`}>Email</a>
				</li>
				{
					(social.links as SocialLink[]).map((link) => (
						<li>
							<a href={link.url} rel="noopener" target="_blank">
								{link.name}
							</a>
						</li>
					))
				}
				<li>
					<a href="/uses/">Uses</a>
				</li>
			</ul>
		</div>
	</div>
</footer>
